<!DOCTYPE html>

<html lang="en">
  <head>
    <title>Roundcube; and avoiding walled gardens - Sandstorm Blog</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="Roundcube; and avoiding walled gardens">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://sandstorm.io/images/sandcat.png">
    <meta property="og:url" content="https://sandstorm.io/news/2014-08-11-roundcube">
    <meta property="og:description"
        content="Real-time collaborative web productivity suite behind the firewall.">
    <link rel="stylesheet" type="text/css" href="/style.css">
    <link rel="alternate" type="application/rss+xml" title="Sandstorm.io Blog" href="/feed.xml">
    
<script src="/ga-helper.js"></script>
<script>
(function(){

function getIdFromCookie() {
  var match = document.cookie.match(new RegExp("(^| )sandstormStatsId=([^;]+)"));
  if (match) return match[2];
}

function setIdCookie(val) {
  var d = new Date();
  d.setMonth(d.getMonth() + 120);
  document.cookie = "sandstormStatsId=" + val + ";expires=" + d + ";domain=.sandstorm.io;";
}

function uidGenerator() {
  if (window.crypto && window.crypto.getRandomValues) {
    var array = new Uint32Array(4);
    window.crypto.getRandomValues(array);
    return array[0] + "-" + array[1] + "-" + array[2] + "-" + array[3];
  } else {
    var genInt = function() {
      return Math.floor(Math.random() * 0x100000000);
    }
    return genInt() + "-" + genInt() + "-" + genInt() + "-" + genInt();
  }
}

function getId() {
  var id = getIdFromCookie();
  if (!id) {
    id = uidGenerator();
    setIdCookie(id);
  }
  return id;
}

function sendData(data, path) {
  var xhr = new XMLHttpRequest();

  xhr.onreadystatechange = function () {
    if (xhr.readyState == 4) {
      if (xhr.status >= 200 && xhr.status < 300) {
        // do nothing
      } else {
        console.error("analytics send failed:", xhr.statusText, xhr.responseText);
      }
    }
  };

  xhr.open("POST", "https://api-5d23e9c497f90642a85ba1fb909fa9d8.oasis.sandstorm.io/" + path, true);

  xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
  xhr.setRequestHeader("Authorization", "Bearer hVU87Vp2UzNnRmMepiXpjKUk6n6MZc7YMgAJ6YrVe-6");

  xhr.send(JSON.stringify(data));
}


function isInExperiment(userId, exp) {
  var idBlocks = userId.split("-");
  var id = parseInt(idBlocks[0], 10);
  return exp.exp_range_start <= id && id < exp.exp_range_end;
}

function addCssOverride(inExperiment, id, activeDisplayValue) {
  var s = document.createElement('style');
  s.type = 'text/css';
  var r = "";
  if (inExperiment) {
    r = r + ".exp-" + id + "-baseline { display: none !important; }\n";
    r = r + ".exp-" + id + "-test { display: " + activeDisplayValue + " !important; }\n";
  }
  s.innerHTML = r;
  document.getElementsByTagName('head')[0].appendChild(s);
}

var experiments = [
  {
    id: "install-screencast-autoplay",
    exp_range_start: 0,
    exp_range_end: 0x7fffffff, // 50% of users
    hook: function (userId, exp, inExperiment) {
      // Creates a stylesheet with a pair of classes that change the display: property,
      // allowing hiding of baseline content and showing of experimental content.
      addCssOverride(inExperiment, exp.id, "block");
    }
  },
  {
    id: "donations-bar",
    exp_range_start: 0,  // disable
    exp_range_end: 0,
    hook: function (userId, exp, inExperiment) {
      addCssOverride(inExperiment, exp.id, "flex");
    }
  }
];

var experimentMembership = {};
var userId = getId();
for (var i=0; i<experiments.length; i++) {
  var exp = experiments[i];
  var a = isInExperiment(userId, exp);
  exp.inExperiment = a;
  experimentMembership[exp.id] = a;
}

function runExperimentHooks() {
  for (var i=0; i<experiments.length; i++) {
    var exp = experiments[i];
    if (exp.hook) {
      exp.hook(userId, exp, exp.inExperiment);
    }
  }
}

function trackView() {
  var id = getId();
  sendData({
    uid: id,
    referrer: document.referrer,
    location: window.location + '',
    experiments: experimentMembership
  }, "pageEvent");
}

function trackClick(elementId) {
  var id = getId();
  sendData({
    uid: id,
    elementId: elementId,
    location: window.location + '',
    experiments: experimentMembership
  }, "clickEvent");
}


runExperimentHooks();
trackView();

window.sandstormTracker = {
  trackView: trackView,
  trackClick: trackClick,
  experiments: experiments,
  getId: getId
};

})();
</script>

  </head>



  <body id="blog">
    <nav>
      <a href="/">Sandstorm.io</a>
      <a href="/get">Get Sandstorm</a>
      <a href="/features">Features</a>
      <a href="/news/">Blog</a>
      <a href="https://docs.sandstorm.io">Docs</a>
      <a href="/community">Community</a>
      <!-- TODO: search -->
    </nav>
    <div class="notice exp-donations-bar-test" id="notice1">
      <span>Your donations help us make open source apps viable.</span>
      <form class="donate-form" action="/">
        <label class="donate-label" for="donate-top">$</label>
        <input class="donate-input" id="donate-top"  name="AMOUNT" type="number" value="10" required>
        <button type="submit">Donate</button>
      </form>
    </div>

    <header>
  <div class="sand">
    <h1>Sandstorm Blog</h1>
  </div>
</header>

<div class="post-list">

<div class="sidebar">
  <ul class="socialmedia">
    <li><a class="twitter" href="https://twitter.com/SandstormIO">Twitter</a>
    <li><a class="facebook" href="https://www.facebook.com/sandstorm.io" target="blank">Facebook</a>
    <li><a class="google" href="https://plus.google.com/+SandstormIo" target="_blank">Google</a>
    <li><a class="github" href="https://github.com/sandstorm-io/sandstorm" target="_blank">Github</a>
  </ul>

  <div class="more">
    <form id="signup" action="https://sandstorm.us7.list-manage.com/subscribe/post?u=1a036c5ea0fc3c215793748ed&amp;id=5d9399a0af" method="post">
      Join our mailing list for updates<br>
      <input type="email" name="EMAIL" placeholder="E-mail" required><input type="submit" value="Submit">
    </form>
    <a href="/get">
      Sandstorm is a self-hostable web productivity suite.
      <span class="signup" href="https://oasis.sandstorm.io">Sign up for free</span>
      <span class="selfhost" href="/install">or host your own</span>
    </a>
    
    <h3>Recommended Posts</h3>
    <ul>
      <li><a href="/news/2014-07-21-open-source-web-apps-require-federated-hosting">Open Source Web Apps Aren't Viable; Let's Fix That</a></li>
      <li><a href="/news/2016-02-29-security-track-record">Sandstorm's security track record, and what it means for self-hosting</a></li>
      <li><a href="/news/2016-08-17-decentralization-is-about-diversity">Decentralization is about diversity</a></li>
      <li><a href="/news/2016-01-22-8-new-open-source-apps.html">8 New open source self-hostable apps</a></li>
      <li><a href="/news/2016-04-06-sandstorm-for-work">Sandstorm for Work Beta: LDAP, SAML, organization management</a></li>
      <li><a href="/news/2016-02-05-app-author-publicity-oasis">Free publicity for your indie web app, and free Oasis service for you</a></li>
      <li><a href="/news/2015-10-01-free-ssl-certificates.html">Free, automated SSL certificates for Sandstorm self-hosters</a></li>
      <li><a href="/news/2014-08-19-why-not-run-docker-apps.html">Why doesn't Sandstorm just run Docker apps?</a></li>
      <li><a href="/news/2015-05-05-delegation-is-the-cornerstone-of-civilization.html">Understand the Sandstorm sharing model</a></li>
    </ul>
    
    <h3>Further Reading</h3>
      <ul>
        <li><a href="/how-it-works">How Sandstorm Works</a></li>
        <li><a href="http://docs.sandstorm.io">Sandstorm Documentation</a></li>
        <li><a href="/install">How to install Sandstorm</a></li>
      </ul>
  </div>
</div>


<nav class="pagination top">
  <a class="newer" href="/news/" title="All posts">&laquo; All posts</a>
</nav>

<section>
  <h2>Roundcube; and avoiding walled gardens</h2>
  <p class="post-details">By <a href="https://github.com/kentonv">Kenton Varda</a>
    
    - 11 Aug 2014
  <p>Today we’re releasing our port of <a href="http://roundcube.net">Roundcube</a>, another open source e-mail web app. You can go install it from the app list now, either on your own Sandstorm server or <a href="https://demo.sandstorm.io">on our demo</a>.</p>

<p><img src="https://sandstorm.io/apps/roundcube.png" alt="Screenshot" /></p>

<p>To this you might ask: What happened to <a href="/news/2014-07-07-mailpile.html">Mailpile</a>?</p>

<p>Nothing happened. We support both! We like Mailpile, but we also want to give you choices. With Sandstorm, you can mix and match apps from competing developers as you see fit, while still retaining the unified experience of Sandstorm.</p>

<h3 id="lets-end-walled-gardens">Let’s end walled gardens</h3>

<p>Usually, when you sign up for a company’s suite of “cloud apps”, you have two choices:</p>

<ol>
  <li>Restrict yourself only to the apps that company provides and no others. This way you get a nicely integrated experience, but if one or more apps in the suite aren’t to your liking, you are stuck with them.</li>
  <li>Also use apps from other developers. But you probably have to log into those apps separately, and they won’t integrate well with the first company’s suite. You end up with a fragmented experience in which you must remember multiple passwords and re-enter the same data into each service.</li>
</ol>

<p>We call this the “walled garden” problem. Big SaaS (Software-as-a-Service) providers tend to build walled gardens of apps that only integrate with other apps from the same developer.</p>

<p>It would be easy and convenient for us to say that these companies are Evil and just want to lock you in, but that’s not true. The reality is that integration across security realms is hard. When each company has their own notion of users that can’t easily be mapped to each other, and understandably no company is willing to trust other companies with their security, how can you integrate apps containing private data? The answer in practice is OAuth, but OAuth permissions requests are clunky and disruptive to the UX. Some users are scared off by it – while others aren’t scared enough and just click “OK”.</p>

<p>But developers within a company are perfectly willing to trust other developers in the same company to get security right, and so the entire OAuth dance can be skipped in these cases. This makes first-party integrations easy. Now imagine what would happen if a single company’s own apps had to OAuth to each other before integration. Imagine, for example, if Google Docs had to ask you for permission to fetch your contact list from GMail before enabling auto-complete of contact names in the share dialog. Probably, Google Docs wouldn’t bother, and there would be no autocomplete. Or imagine if the Facebook profile page had to ask for permision to connect to your Facebook photos before you could set your profile photo. This would be a huge pain! And even then, it wouldn’t necessarily end the walled garden: with OAuth, an app says “I need permission to talk to GMail,” not “I need permission to talk to an e-mail app.” There’s still no opportunity for you to substitute a third-party app in its place.</p>

<p>With Sandstorm, we’re solving a lot of these problems:</p>

<ul>
  <li>All your apps run under the same roof, whether they are from the same developer or competing developers. You can use a diverse set of apps without having to remember a separate password for each one.</li>
  <li>In place of OAuth, we’re building the Powerbox. This UI integrates better into the app’s UX by simultaneously acting as a picker and permissions granter. Apps usually need to present a picker anyway, so this is less disruptive. For example, if an app wants you to choose some contacts to which to send invitations, instead of first asking for permission to <em>all</em> your contacts just to display a picker UI back to you, the app will ask Sandstorm to display a Powerbox picker for contacts. Only the contacts you choose will be passed to the app. So, the UX is exactly the same, except without the separate permissions check, and yet it is more secure. The same idea would apply to choosing photos, or choosing anything else.</li>
  <li>When using the Powerbox UI, the requesting app does not name an exact receiving app it wants to access, but instead specifies a protocol. So instead of saying “I need access to Mailpile,” the app would say “I need access to an e-mail app,” and you could potentially choose Mailpile, Roundcube, or any other e-mail app. Apps do have to implement compatible protocols, which can be difficult, but this approach at least leaves open the possibility of a newcomer app emulating the protocols already used by other apps in the space, thereby breaking down the network effect that would otherwise prevent a new app from gaining a foothold.</li>
</ul>

<p>We hope these design choices mean you get a unified experience no matter which apps you choose to use, and new players can break into the market more quickly, leading to faster innovation.</p>

</section>

</div>


    <div class="notice exp-donations-bar-test" id="notice2">
      <span>Your donations help us make open source apps viable.</span>
      <form class="donate-form" action="/">
        <label class="donate-label" for="donate-bottom">$</label>
        <input class="donate-input" id="donate-bottom"  name="AMOUNT" type="number" value="10" required>
        <button type="submit">Donate</button>
      </form>
    </div>
    <footer>
      <ul>
        <li>
          <h3><a href="/get">Get Sandstorm</a></h3>
          <ul>
            <li><a href="/get">Sandstorm on Oasis</a>
            <li><a href="/get">Sandstorm Standard</a>
            <li><a href="/get">Sandstorm for Work</a>
            <li><a href="https://github.com/sandstorm-io/sandstorm">Source Code (GitHub)</a>
            <li><a href="/go/education">For Educators</a></li>
          </ul>
        </li>
        <li>
          <h3><a href="/features">Features</a></h3>
          <ul>
            <li><a href="https://apps.sandstorm.io">App Market</a></li>
            <li><a href="/features">Core features</a>
            <li><a href="/features#security">Security features</a>
            <li><a href="/business">Sandstorm for Work</a>
            <li><a href="/business#scale">Sandstorm for Enterprise</a>
            <li><a href="/developer">Development</a>
          </ul>
        </li>
        <li>
          <h3><a href="https://docs.sandstorm.io">Documentation</a></h3>
          <ul>
            <li><a href="https://docs.sandstorm.io/en/latest/using/">How to use Sandstorm</a>
            <li><a href="https://docs.sandstorm.io/en/latest/developing/">Developer Hub</a>
            <li><a href="https://docs.sandstorm.io/en/latest/administering/">Administering &amp; installing</a>
            <li><a href="https://docs.sandstorm.io/en/latest/using/security-practices/">Security</a>
          </ul>
        </li>
        <li>
          <h3><a href="/how-it-works">How it Works</a></h3>
          <ul>
            <li><a href="/how-it-works#grains">Fine-grained object containers</a>
            <li><a href="/how-it-works#capabilities">Capability-based Security</a>
          </ul>
        </li>
        <li>
          <h3><a href="/community">Community</a></h3>
          <ul>
            <li><a href="/news">Sandstorm Blog</a>
            <li><a href="/community#connect-with">Connect with us</a>
            <li><a href="/community#helpothers">Help Others</a>
            <li><a href="/community#helpproject">Help the Project</a>
          </ul>
        </li>
        <li>
          <h3><a href="/about">About</a></h3>
          <ul>
            <li><a href="/about">Sandstorm Story</a>
            <li><a href="/about#team">Team</a>
            <li><a href="/about#advisors">Advisors</a>
            <li><a href="mailto:contact@sandstorm.io">Contact</a>
          </ul>
        </li>
        <li>
          <h3><a href="https://oasis.sandstorm.io">Oasis Hosting</a></h3>
          <ul>
            <li class="sign-in-footer"><a href="https://oasis.sandstorm.io">Sign in</a>
          </ul>
        </li>
        <li>
          <h3>Connect</h3>
          <ul id="socialmedia-small">
						<li><a class="twitter" href="https://twitter.com/SandstormIO"></a>
						<li><a class="google" href="https://plus.google.com/+SandstormIo" target="_blank"></a>
						<li><a class="facebook" href="https://www.facebook.com/sandstorm.io" target="blank"></a>
						<li><a class="github" href="https://github.com/sandstorm-io/sandstorm" target="_blank"></a>
  			</ul>
        </li>
        <li>
          <h3>Join our mailing list!</h3>
            <div class="subscribe-small">
                                                        <form action="https://sandstorm.us7.list-manage.com/subscribe/post?u=1a036c5ea0fc3c215793748ed&amp;id=5d9399a0af" method="post">
                                                                <input type="email" name="EMAIL" placeholder="e-mail" required>
                                                                <input type="submit" value="Submit">
                                                                </form>
            </div>
          <ul>
            <li><a href=""></a>
          </ul>
        </li>
      </ul>
      <p>This page was hand-crafted using only the finest web technologies.
    </footer>

    <!-- Google Analytics -->
    <script type="text/javascript">
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-42127409-1', 'sandstorm.io');
      ga('send', 'pageview');
    </script>

    <!-- livereload, for development -->
    <script type="text/javascript">
      if (document.location.hostname === "localhost") {
        document.write('<script src="http://localhost:35729/livereload.js"></scr' + 'ipt>');
      }
    </script>

    <!-- Donation form integration -->
    <script src="https://checkout.stripe.com/checkout.js"></script>
    <script>
    var amountCents = 0;
    var handler = StripeCheckout.configure({
      key: "pk_live_bkrz8iFkfEeXDsdIqzDNdSkH",
      image: "https://sandstorm.io/images/sandstorm-purplecircle.png",
      locale: "auto",
      token: function(token) {
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function () {
          if (xhr.readyState === 4) {
            if (xhr.status !== 200) {
              console && console.error(xhr.responseText);
            } else {
              console && console.log("donation successful");
            }
          }
        };
        xhr.open("POST", "https://donations-backend.sandstorm.io/", true);
        var formData = new FormData();
        formData.append("token_id", token.id);
        formData.append("token_email", token.email);
        formData.append("amount", amountCents);
        xhr.send(formData);
        window.sandstormTracker && window.sandstormTracker.trackClick("donation-complete");
      }
    });
    var submitDonateForm = function(e) {
      window.lastEvent = e;
      e.preventDefault();
      var dollars = parseFloat(e.target.querySelector("input").value);
      amountCents = Math.floor(100*dollars);
      handler.open({
        name: "Sandstorm.io",
        description: "Donation (not tax deductible)",
        zipCode: true,
        amount: amountCents,
      });
      window.sandstormTracker && window.sandstormTracker.trackClick("donate-button");
    };
    var forms = document.querySelectorAll("form.donate-form");
    for (var i=0; i<forms.length; i++) {
      var form = forms[i];
      form.onsubmit = submitDonateForm;
    }
    // Close checkout on page navigation.
    window.addEventListener("popstate", function() {
      handler.close();
    });
    </script>
  </body>
</html>
